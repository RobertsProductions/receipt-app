<nav class="navbar">
  <div class="navbar-container">
    <a routerLink="/" class="navbar-brand">
      <span class="brand-icon">ðŸ“‹</span>
      <span class="brand-text">Warranty App</span>
    </a>

    <div class="navbar-menu" [class.mobile-open]="mobileMenuOpen">
      @if (isAuthenticated) {
        <a routerLink="/receipts" routerLinkActive="active" class="nav-link">Receipts</a>
        <a routerLink="/warranties" routerLinkActive="active" class="nav-link">Warranties</a>
        <a routerLink="/chatbot" routerLinkActive="active" class="nav-link">AI Chat</a>
      }
    </div>

    <div class="navbar-actions">
      @if (isAuthenticated) {
        <div class="user-menu">
          <button class="user-menu-button" (click)="toggleUserMenu()">
            <span class="user-avatar">{{ getUserInitials() }}</span>
            <span class="user-name">{{ currentUser?.userName }}</span>
            <span class="chevron">â–¼</span>
          </button>

          @if (userMenuOpen) {
            <div class="user-menu-dropdown">
              <a routerLink="/profile" class="dropdown-item" (click)="closeUserMenu()">
                Profile
              </a>
              <a routerLink="/settings" class="dropdown-item" (click)="closeUserMenu()">
                Settings
              </a>
              <hr class="dropdown-divider" />
              <button class="dropdown-item logout" (click)="onLogout()">
                Logout
              </button>
            </div>
          }
        </div>
      } @else {
        <a routerLink="/login" class="btn btn-ghost">Login</a>
        <a routerLink="/register" class="btn btn-primary">Sign Up</a>
      }

      <button class="mobile-menu-toggle" (click)="toggleMobileMenu()">
        <span class="hamburger-icon">â˜°</span>
      </button>
    </div>
  </div>
</nav>

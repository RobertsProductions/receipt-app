<div class="verify-phone-page">
  <div class="verify-phone-container">
    <app-card>
      <div class="verify-phone-content">
        <div class="verify-phone-header">
          <svg class="verify-phone-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
          </svg>
          
          <h1 class="verify-phone-title">Verify Phone Number</h1>
          <p class="verify-phone-subtitle">
            We sent a 6-digit code to <strong>{{ phoneNumber }}</strong>
          </p>
        </div>

        <div class="code-input-container">
          <div class="code-inputs" (paste)="onPaste($event)">
            <input
              *ngFor="let digit of code; let i = index"
              [id]="'code-' + i"
              type="text"
              inputmode="numeric"
              maxlength="1"
              class="code-input"
              [class.code-input-filled]="code[i]"
              [value]="code[i]"
              [attr.data-testid]="'code-input-' + i"
              (input)="onCodeInput(i, $event)"
              (keydown)="onKeyDown(i, $event)"
              autocomplete="off">
          </div>
        </div>

        <div class="verify-phone-actions">
          <app-button
            variant="primary"
            size="lg"
            [fullWidth]="true"
            [disabled]="!isCodeComplete"
            [loading]="loading"
            testId="verify-button"
            (onClick)="verifyCode()">
            Verify Phone Number
          </app-button>

          <div class="resend-section">
            <span class="resend-text">Didn't receive the code?</span>
            <button
              class="resend-button"
              [disabled]="resendCooldown > 0 || resendLoading"
              [attr.data-testid]="'resend-button'"
              (click)="resendCode()">
              <span *ngIf="resendCooldown === 0">Resend Code</span>
              <span *ngIf="resendCooldown > 0">Resend in {{ resendCooldown }}s</span>
            </button>
          </div>

          <app-button
            variant="ghost"
            size="md"
            [fullWidth]="true"
            testId="cancel-button"
            (onClick)="cancel()">
            Cancel
          </app-button>
        </div>
      </div>
    </app-card>
  </div>
</div>
